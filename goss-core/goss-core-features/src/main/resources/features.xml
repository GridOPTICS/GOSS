<?xml version="1.0" encoding="UTF-8"?>
<features xmlns="http://karaf.apache.org/xmlns/features/v1.2.0"  name="goss-core-${project.version}" >

    <feature name="goss-ipojo" version="1.12.0">
    	<feature>goss-dependencies</feature>
        <bundle>mvn:org.apache.felix/org.apache.felix.ipojo.api/1.12.0</bundle>
        <bundle>mvn:org.apache.felix/org.apache.felix.ipojo/1.12.0</bundle>
        <bundle>mvn:org.apache.felix/org.apache.felix.ipojo.gogo/1.12.0</bundle>
        <bundle>mvn:org.apache.felix/org.apache.felix.ipojo.composite/1.12.0</bundle>
        
        <!--<bundle>mvn:org.apache.felix/org.apache.felix.ipojo.webconsole/1.7.0</bundle>-->
    </feature>
    
    <feature name="goss-activemq-broker-nosecurity" version="${project.version}">
        <feature version="5.9.0">activemq</feature>
        <configfile finalname="/etc/org.apache.activemq.server-default.cfg">
        	mvn:pnnl.goss/goss-core-features/${pom.version}/cfg/goss-broker-config
        </configfile>        
        <configfile finalname="/etc/pnnl-goss-activemq-broker.xml">
        	mvn:pnnl.goss/goss-core-features/${pom.version}/xml/goss-broker-nosecurity
        </configfile>
    </feature>
    
    
    <!-- 
    <feature name="goss-activemq-broker" version="${project.version}">
    	<feature version="${activemq.version}" >activemq</feature>
    	<configfile finalname="/etc/org.apache.activemq.server-default.cfg">
    		mvn:pnnl.goss/goss-core-features/${pom.version}/cfg/goss-broker-config
    	</configfile>
    	<configfile version="/etc/pnnl-goss-activemq-broker.xml">
    		mvn:pnnl.goss/goss-core-features/${pom.version}/xml/goss-broker
    	</configfile>
    	<configfile finalname="/etc/pnnl.goss.core.security.utils.cfg">
			mvn:pnnl.goss/goss-core-features/${pom.version}/cfg/security-utils-config    	
    </feature> -->
    
    <feature name="goss-dependencies" version="${project.version}">
    	<bundle dependency="true">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.xstream/${servicemix-xstream.version}</bundle>
    	<bundle dependency="true">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.commons-io/${servicemix-commons-io.version}</bundle>
    	<bundle dependency="true">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.commons-dbcp/${servicemix-commons-dbcp.version}</bundle>
    	<bundle dependency="true">mvn:com.google.code.gson/gson/${gson.version}</bundle>
    	<bundle dependency="true">mvn:mysql/mysql-connector-java/${mysql-connector.version}</bundle>
    	<bundle dependency="true">mvn:org.apache.httpcomponents/httpcore-osgi/${httpclient-osgi.version}</bundle>
    	<bundle dependency="true">mvn:org.apache.httpcomponents/httpclient-osgi/${httpclient-osgi.version}</bundle>
    	
    	<bundle dependency="true">mvn:org.fusesource.stompjms/stompjms-client/1.19</bundle>
  		<bundle dependency="true">mvn:org.fusesource.hawtdispatch/hawtdispatch-transport/1.20</bundle>
    	<bundle dependency="true">mvn:org.fusesource.hawtdispatch/hawtdispatch/1.20</bundle>
  		<bundle dependency="true">mvn:org.fusesource.hawtbuf/hawtbuf/1.9</bundle>
    </feature>

    <feature name="goss-core-feature" version="${pom.version}">
    	<configfile finalname="/etc/pnnl.goss.core.cfg">
        	mvn:pnnl.goss/goss-core-features/${pom.version}/cfg/goss-core
        </configfile>
        <configfile finalname="/etc/pnnl.goss.datasources.cfg">
        	mvn:pnnl.goss/goss-core-features/${pom.version}/cfg/goss-datasources
        </configfile>
    	<feature>goss-dependencies</feature>
    	<feature>goss-ipojo</feature>
    	<feature version="${cxf.version}">cxf</feature>
    	    	
    	<!-- Installs all the necessary activemq info for the broker and web-console -->
    	<bundle start-level="80" dependency="true">mvn:pnnl.goss/goss-core-security-utils/${pom.version}</bundle>
    	   	
    	<bundle start-level="84" dependency="true">mvn:pnnl.goss/goss-core/${pom.version}</bundle>
    	<bundle start-level="85" dependency="true">mvn:pnnl.goss/goss-core-client/${pom.version}</bundle>    	    	
    	<bundle start-level="86" dependency="true">mvn:pnnl.goss/goss-core-security/${pom.version}</bundle>
    	<bundle start-level="87" dependency="true">mvn:pnnl.goss/goss-core-server/${pom.version}</bundle>

    </feature>   
</features>
